(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1204:function(module,exports,__webpack_require__){},1205:function(module,exports,__webpack_require__){var map={"./stories/RichEditor.stories.tsx":1206};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=1205},1206:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var _Users_xmly_project_rich_editor_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(124),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__),___WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(250),_README_md__WEBPACK_IMPORTED_MODULE_4__=(__webpack_require__(1210),__webpack_require__(249)),_storybook_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(99),withSourceLoader=__webpack_require__(380).withSource,__STORY__=(__webpack_require__(380).addSource,"import React from 'react';\nimport RichEditor from '../';\nimport '../../styles/rich-editor.css';\nimport markdown from '../README.md';\nimport { storiesOf } from '@storybook/react';\n\nconst { useState } = React;\n\nconst Simple = () => {\n  const [html, setHtml] = useState('<p>hello RichEditor!</p>');\n  const [text, setText] = useState('hello RichEditor!');\n\n  return (\n    <div>\n      <RichEditor\n        width='100%'\n        defaultValue={html}\n        max={100}\n        onChange={(html: string, text: string) => {\n          setHtml(html);\n          setText(text);\n        }}\n      ></RichEditor>\n      <div>html: {html}</div>\n      <div>text: {text}</div>\n    </div>\n  );\n};\n\nconst CustomUploadImage = () => {\n  const [html, setHtml] = useState('<p>hello RichEditor!</p>');\n  const [text, setText] = useState('hello RichEditor!');\n\n  const mockUploadImage = (formData: FormData) => {\n    console.log('正在上传图片：', formData);\n    return new Promise((resolve, reject) => {\n      const res = {\n        data:\n          'http://cdn.himalaya.com/40fc0de0b53f42fe9f3f3011243af8c6.png?x-oss-process=image/resize,w_100,h_100&auth_key=4102416000-1234-0-1753249b5a514918bc5c545847d206ba'\n      };\n      setTimeout(() => {\n        resolve(res);\n      }, 200);\n    });\n  };\n\n  const handleCustomUploadImg = (\n    files: FileList,\n    insert: (insertContent: string) => void\n  ) => {\n    const formData = new window.FormData();\n    for (let i = 0; i < files.length; i++) {\n      formData.append(`picture`, files[i]);\n    }\n    mockUploadImage(formData).then((res: any) => {\n      insert(res.data);\n    });\n  };\n\n  return (\n    <div>\n      <RichEditor\n        width='100%'\n        defaultValue={html}\n        max={100}\n        onChange={(html: string, text: string) => {\n          setHtml(html);\n          setText(text);\n        }}\n        customUploadImg={handleCustomUploadImg}\n      ></RichEditor>\n      <div>html: {html}</div>\n      <div>text: {text}</div>\n    </div>\n  );\n};\n\nstoriesOf('RichEditor 富文本编辑器', module)\n  .add('最简单的 RichEditor', () => <Simple />, {\n    info: {\n      text: markdown\n    }\n  })\n  .add('自定义上传图片逻辑', () => <CustomUploadImage />, {\n    info: {\n      text: markdown\n    }\n  });\n"),__ADDS_MAP__={"richeditor-富文本编辑器--自定义上传图片逻辑":{startLoc:{col:7,line:84},endLoc:{col:3,line:88},startBody:{col:20,line:84},endBody:{col:47,line:84}},"richeditor-富文本编辑器--最简单的-richeditor":{startLoc:{col:7,line:79},endLoc:{col:3,line:83},startBody:{col:26,line:79},endBody:{col:42,line:79}}},useState=react__WEBPACK_IMPORTED_MODULE_1___default.a.useState,Simple=function Simple(){var _useState=useState("<p>hello RichEditor!</p>"),_useState2=Object(_Users_xmly_project_rich_editor_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(_useState,2),html=_useState2[0],setHtml=_useState2[1],_useState3=useState("hello RichEditor!"),_useState4=Object(_Users_xmly_project_rich_editor_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(_useState3,2),text=_useState4[0],setText=_useState4[1];return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(___WEBPACK_IMPORTED_MODULE_2__.a,{width:"100%",defaultValue:html,max:100,onChange:function onChange(html,text){setHtml(html),setText(text)}}),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",null,"html: ",html),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",null,"text: ",text))},CustomUploadImage=function CustomUploadImage(){var _useState5=useState("<p>hello RichEditor!</p>"),_useState6=Object(_Users_xmly_project_rich_editor_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(_useState5,2),html=_useState6[0],setHtml=_useState6[1],_useState7=useState("hello RichEditor!"),_useState8=Object(_Users_xmly_project_rich_editor_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(_useState7,2),text=_useState8[0],setText=_useState8[1];return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(___WEBPACK_IMPORTED_MODULE_2__.a,{width:"100%",defaultValue:html,max:100,onChange:function onChange(html,text){setHtml(html),setText(text)},customUploadImg:function handleCustomUploadImg(files,insert){for(var formData=new window.FormData,i=0;i<files.length;i++)formData.append("picture",files[i]);(function mockUploadImage(formData){return console.log("正在上传图片：",formData),new Promise((function(resolve,reject){var res={data:"http://cdn.himalaya.com/40fc0de0b53f42fe9f3f3011243af8c6.png?x-oss-process=image/resize,w_100,h_100&auth_key=4102416000-1234-0-1753249b5a514918bc5c545847d206ba"};setTimeout((function(){resolve(res)}),200)}))})(formData).then((function(res){insert(res.data)}))}}),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",null,"html: ",html),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",null,"text: ",text))};Object(_storybook_react__WEBPACK_IMPORTED_MODULE_5__.storiesOf)("RichEditor 富文本编辑器",module).addParameters({storySource:{source:__STORY__,locationsMap:__ADDS_MAP__}}).addDecorator(withSourceLoader(__STORY__,__ADDS_MAP__,"/RichEditor.stories.tsx",[],{},"/Users/xmly/project/rich-editor/src/stories",{})).add("最简单的 RichEditor",(function(){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(Simple,null)}),{info:{text:_README_md__WEBPACK_IMPORTED_MODULE_4__.a}}).add("自定义上传图片逻辑",(function(){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(CustomUploadImage,null)}),{info:{text:_README_md__WEBPACK_IMPORTED_MODULE_4__.a}})}.call(this,__webpack_require__(296)(module))},1209:function(module,exports){module.exports=function(){function isDOMList(selector){return!!selector&&(selector instanceof HTMLCollection||selector instanceof NodeList)}function DomElement(selector){if(selector){if(selector instanceof DomElement)return selector;this.selector=selector;var nodeType=selector.nodeType,selectorResult=[];9===nodeType?selectorResult=[selector]:1===nodeType?selectorResult=[selector]:isDOMList(selector)?selectorResult=selector:"string"==typeof selector&&(selectorResult=0===(selector=selector.replace("/\n/mg","").trim()).indexOf("<")?function createElemByHTML(html){var div=void 0;return(div=document.createElement("div")).innerHTML=html,div.children}(selector):function querySelectorAll(selector){var result=document.querySelectorAll(selector);return isDOMList(result)?result:[result]}(selector));var length=selectorResult.length;if(!length)return this;var i=void 0;for(i=0;i<length;i++)this[i]=selectorResult[i];this.length=length}}function $(selector){return new DomElement(selector)}DomElement.prototype={constructor:DomElement,forEach:function forEach(fn){var i=void 0;for(i=0;i<this.length;i++){var elem=this[i];if(!1===fn.call(elem,elem,i))break}return this},get:function get(index){var length=this.length;return index>=length&&(index%=length),$(this[index])},first:function first(){return this.get(0)},last:function last(){var length=this.length;return this.get(length-1)},on:function on(type,selector,fn){fn||(fn=selector,selector=null);var types=[];return types=type.split(/\s+/),this.forEach((function(elem){types.forEach((function(type){type&&(selector?elem.addEventListener(type,(function(e){var target=e.target;target.matches(selector)&&fn.call(target,e)}),!1):elem.addEventListener(type,fn,!1))}))}))},off:function off(type,fn){return this.forEach((function(elem){elem.removeEventListener(type,fn,!1)}))},attr:function attr(key,val){return null==val?this[0].getAttribute(key):this.forEach((function(elem){elem.setAttribute(key,val)}))},addClass:function addClass(className){return className?this.forEach((function(elem){var arr=void 0;elem.className?((arr=(arr=elem.className.split(/\s/)).filter((function(item){return!!item.trim()}))).indexOf(className)<0&&arr.push(className),elem.className=arr.join(" ")):elem.className=className})):this},removeClass:function removeClass(className){return className?this.forEach((function(elem){var arr=void 0;elem.className&&(arr=(arr=elem.className.split(/\s/)).filter((function(item){return!(!(item=item.trim())||item===className)})),elem.className=arr.join(" "))})):this},css:function css(key,val){var currentStyle=key+":"+val+";";return this.forEach((function(elem){var style=(elem.getAttribute("style")||"").trim(),resultArr=[];style?(style.split(";").forEach((function(item){var arr=item.split(":").map((function(i){return i.trim()}));2===arr.length&&resultArr.push(arr[0]+":"+arr[1])})),(resultArr=resultArr.map((function(item){return 0===item.indexOf(key)?currentStyle:item}))).indexOf(currentStyle)<0&&resultArr.push(currentStyle),elem.setAttribute("style",resultArr.join("; "))):elem.setAttribute("style",currentStyle)}))},show:function show(){return this.css("display","block")},hide:function hide(){return this.css("display","none")},children:function children(){var elem=this[0];return elem?$(elem.children):null},append:function append($children){return this.forEach((function(elem){$children.forEach((function(child){elem.appendChild(child)}))}))},remove:function remove(){return this.forEach((function(elem){if(elem.remove)elem.remove();else{var parent=elem.parentElement;parent&&parent.removeChild(elem)}}))},isContain:function isContain($child){var elem=this[0],child=$child[0];return elem.contains(child)},getSizeData:function getSizeData(){return this[0].getBoundingClientRect()},getNodeName:function getNodeName(){return this[0].nodeName},find:function find(selector){return $(this[0].querySelectorAll(selector))},text:function text(val){return val?this.forEach((function(elem){elem.innerHTML=val})):this[0].innerHTML.replace(/<\/?[\s\S]*?\/?>/g,"")},html:function html(value){var elem=this[0];return null==value?elem.innerHTML:(elem.innerHTML=value,this)},val:function val(){return this[0].value.trim()},focus:function focus(){return this.forEach((function(elem){elem.focus()}))},parent:function parent(){return $(this[0].parentElement)},parentUntil:function parentUntil(selector,_currentElem){var results=document.querySelectorAll(selector),length=results.length;if(!length)return null;var elem=_currentElem||this[0];if("BODY"===elem.nodeName)return null;var parent=elem.parentElement,i=void 0;for(i=0;i<length;i++)if(parent===results[i])return $(parent);return this.parentUntil(selector,parent)},equal:function equal($elem){return 1===$elem.nodeType?this[0]===$elem:this[0]===$elem[0]},insertBefore:function insertBefore(selector){var referenceNode=$(selector)[0];return referenceNode?this.forEach((function(elem){referenceNode.parentNode.insertBefore(elem,referenceNode)})):this},insertAfter:function insertAfter(selector){var referenceNode=$(selector)[0];return referenceNode?this.forEach((function(elem){var parent=referenceNode.parentNode;parent.lastChild===referenceNode?parent.appendChild(elem):parent.insertBefore(elem,referenceNode.nextSibling)})):this}};var config={menus:["head","bold","italic","underline","strikeThrough","foreColor","backColor","link","list","justify","quote","emoticon","image","table","video","code","undo","redo"],zIndex:1e4,debug:!1,linkCheck:function linkCheck(text,link){return!0},pasteFilterStyle:!0,showLinkImg:!0,linkImgCallback:function linkImgCallback(url){},uploadImgMaxSize:5242880,uploadImgShowBase64:!1,uploadFileName:"",uploadImgParams:{},uploadImgHeaders:{},withCredentials:!1,uploadImgTimeout:1e4,uploadImgHooks:{before:function before(xhr,editor,files){},success:function success(xhr,editor,result){},fail:function fail(xhr,editor,result){},error:function error(xhr,editor){},timeout:function timeout(xhr,editor){}},qiniu:!1},UA={_ua:navigator.userAgent,isWebkit:function isWebkit(){return/webkit/i.test(this._ua)},isIE:function isIE(){return"ActiveXObject"in window}};function objForEach(obj,fn){var key=void 0;for(key in obj)if(obj.hasOwnProperty(key)&&!1===fn.call(obj,key,obj[key]))break}function arrForEach(fakeArr,fn){var i=void 0,item=void 0,length=fakeArr.length||0;for(i=0;i<length&&(item=fakeArr[i],!1!==fn.call(fakeArr,item,i));i++);}function getRandom(prefix){return prefix+Math.random().toString().slice(2)}function replaceHtmlSymbol(html){return null==html?"":html.replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;")}function Bold(editor){this.editor=editor,this.$elem=$('<div class="w-e-menu">\n            <i class="w-e-icon-bold"><i/>\n        </div>'),this.type="click",this._active=!1}Bold.prototype={constructor:Bold,onClick:function onClick(e){var editor=this.editor,isSeleEmpty=editor.selection.isSelectionEmpty();isSeleEmpty&&editor.selection.createEmptyRange(),editor.cmd.do("bold"),isSeleEmpty&&(editor.selection.collapseRange(),editor.selection.restoreSelection())},tryChangeActive:function tryChangeActive(e){var editor=this.editor,$elem=this.$elem;editor.cmd.queryCommandState("bold")?(this._active=!0,$elem.addClass("w-e-active")):(this._active=!1,$elem.removeClass("w-e-active"))}};var replaceLang=function replaceLang(editor,str){var langArgs=editor.config.langArgs||[],result=str;return langArgs.forEach((function(item){var reg=item.reg,val=item.val;reg.test(result)&&(result=result.replace(reg,(function(){return val})))})),result},_emptyFn=function _emptyFn(){};function DropList(menu,opt){var _this=this,editor=menu.editor;this.menu=menu,this.opt=opt;var $container=$('<div class="w-e-droplist"></div>'),$title=opt.$title,titleHtml=void 0;$title&&(titleHtml=$title.html(),titleHtml=replaceLang(editor,titleHtml),$title.html(titleHtml),$title.addClass("w-e-dp-title"),$container.append($title));var list=opt.list||[],type=opt.type||"list",onClick=opt.onClick||_emptyFn,$list=$('<ul class="'+("list"===type?"w-e-list":"w-e-block")+'"></ul>');$container.append($list),list.forEach((function(item){var $elem=item.$elem,elemHtml=$elem.html();elemHtml=replaceLang(editor,elemHtml),$elem.html(elemHtml);var value=item.value,$li=$('<li class="w-e-item"></li>');$elem&&($li.append($elem),$list.append($li),$elem.on("click",(function(e){onClick(value),_this.hideTimeoutId=setTimeout((function(){_this.hide()}),0)})))})),$container.on("mouseleave",(function(e){_this.hideTimeoutId=setTimeout((function(){_this.hide()}),0)})),this.$container=$container,this._rendered=!1,this._show=!1}function Head(editor){var _this=this;this.editor=editor,this.$elem=$('<div class="w-e-menu"><i class="w-e-icon-header"><i/></div>'),this.type="droplist",this._active=!1,this.droplist=new DropList(this,{width:100,$title:$("<p>设置标题</p>"),type:"list",list:[{$elem:$("<h3>Heading</h3>"),value:"<h2>"},{$elem:$("<p>Body</p>"),value:"<p>"}],onClick:function onClick(value){_this._command(value)}})}DropList.prototype={constructor:DropList,show:function show(){this.hideTimeoutId&&clearTimeout(this.hideTimeoutId);var $menuELem=this.menu.$elem,$container=this.$container;if(!this._show){if(this._rendered)$container.show();else{var menuHeight=$menuELem.getSizeData().height||0,width=this.opt.width||100;$container.css("margin-top",menuHeight+"px").css("width",width+"px"),$menuELem.append($container),this._rendered=!0}this._show=!0}},hide:function hide(){this.showTimeoutId&&clearTimeout(this.showTimeoutId);var $container=this.$container;this._show&&($container.hide(),this._show=!1)}},Head.prototype={constructor:Head,_command:function _command(value){var editor=this.editor,$selectionElem=editor.selection.getSelectionContainerElem();editor.$textElem.equal($selectionElem)||editor.cmd.do("formatBlock",value)},tryChangeActive:function tryChangeActive(e){var editor=this.editor,$elem=this.$elem,cmdValue=editor.cmd.queryCommandValue("formatBlock");/^h/i.test(cmdValue)?(this._active=!0,$elem.addClass("w-e-active")):(this._active=!1,$elem.removeClass("w-e-active"))}};var emptyFn=function emptyFn(){},_isCreatedPanelMenus=[];function Panel(menu,opt){this.menu=menu,this.opt=opt}function Link(editor){this.editor=editor,this.$elem=$('<div class="w-e-menu"><i class="w-e-icon-link"><i/></div>'),this.type="panel",this._active=!1}function Italic(editor){this.editor=editor,this.$elem=$('<div class="w-e-menu">\n            <i class="w-e-icon-italic"><i/>\n        </div>'),this.type="click",this._active=!1}function Redo(editor){this.editor=editor,this.$elem=$('<div class="w-e-menu">\n            <i class="w-e-icon-redo"><i/>\n        </div>'),this.type="click",this._active=!1}function StrikeThrough(editor){this.editor=editor,this.$elem=$('<div class="w-e-menu">\n            <i class="w-e-icon-strikethrough"><i/>\n        </div>'),this.type="click",this._active=!1}function Underline(editor){this.editor=editor,this.$elem=$('<div class="w-e-menu">\n            <i class="w-e-icon-underline"><i/>\n        </div>'),this.type="click",this._active=!1}function Undo(editor){this.editor=editor,this.$elem=$('<div class="w-e-menu">\n            <i class="w-e-icon-undo"><i/>\n        </div>'),this.type="click",this._active=!1}function List(editor){var _this=this;this.editor=editor,this.$elem=$('<div class="w-e-menu"><i class="w-e-icon-list2"><i/></div>'),this.type="droplist",this._active=!1,this.droplist=new DropList(this,{width:120,$title:$("<p>设置列表</p>"),type:"list",list:[{$elem:$('<span><i class="w-e-icon-list-numbered"></i> 有序列表</span>'),value:"insertOrderedList"},{$elem:$('<span><i class="w-e-icon-list2"></i> 无序列表</span>'),value:"insertUnorderedList"}],onClick:function onClick(value){_this._command(value)}})}function Justify(editor){var _this=this;this.editor=editor,this.$elem=$('<div class="w-e-menu"><i class="w-e-icon-paragraph-left"><i/></div>'),this.type="droplist",this._active=!1,this.droplist=new DropList(this,{width:100,$title:$("<p>对齐方式</p>"),type:"list",list:[{$elem:$('<span><i class="w-e-icon-paragraph-left"></i> 靠左</span>'),value:"justifyLeft"},{$elem:$('<span><i class="w-e-icon-paragraph-center"></i> 居中</span>'),value:"justifyCenter"},{$elem:$('<span><i class="w-e-icon-paragraph-right"></i> 靠右</span>'),value:"justifyRight"}],onClick:function onClick(value){_this._command(value)}})}function ForeColor(editor){var _this=this;this.editor=editor,this.$elem=$('<div class="w-e-menu"><i class="w-e-icon-pencil2"><i/></div>'),this.type="droplist",this._active=!1,this.droplist=new DropList(this,{width:120,$title:$("<p>文字颜色</p>"),type:"inline-block",list:[{$elem:$('<i style="color:#000000;" class="w-e-icon-pencil2"></i>'),value:"#000000"},{$elem:$('<i style="color:#FC5832;" class="w-e-icon-pencil2"></i>'),value:"#FC5832"}],onClick:function onClick(value){_this._command(value)}})}function BackColor(editor){var _this=this;this.editor=editor,this.$elem=$('<div class="w-e-menu"><i class="w-e-icon-paint-brush"><i/></div>'),this.type="droplist",this._active=!1,this.droplist=new DropList(this,{width:120,$title:$("<p>背景色</p>"),type:"inline-block",list:[{$elem:$('<i style="color:#000000;" class="w-e-icon-paint-brush"></i>'),value:"#000000"},{$elem:$('<i style="color:#eeece0;" class="w-e-icon-paint-brush"></i>'),value:"#eeece0"},{$elem:$('<i style="color:#1c487f;" class="w-e-icon-paint-brush"></i>'),value:"#1c487f"},{$elem:$('<i style="color:#4d80bf;" class="w-e-icon-paint-brush"></i>'),value:"#4d80bf"},{$elem:$('<i style="color:#c24f4a;" class="w-e-icon-paint-brush"></i>'),value:"#c24f4a"},{$elem:$('<i style="color:#8baa4a;" class="w-e-icon-paint-brush"></i>'),value:"#8baa4a"},{$elem:$('<i style="color:#7b5ba1;" class="w-e-icon-paint-brush"></i>'),value:"#7b5ba1"},{$elem:$('<i style="color:#46acc8;" class="w-e-icon-paint-brush"></i>'),value:"#46acc8"},{$elem:$('<i style="color:#f9963b;" class="w-e-icon-paint-brush"></i>'),value:"#f9963b"},{$elem:$('<i style="color:#ffffff;" class="w-e-icon-paint-brush"></i>'),value:"#ffffff"}],onClick:function onClick(value){_this._command(value)}})}function Quote(editor){this.editor=editor,this.$elem=$('<div class="w-e-menu">\n            <i class="w-e-icon-quotes-left"><i/>\n        </div>'),this.type="click",this._active=!1}function Code(editor){this.editor=editor,this.$elem=$('<div class="w-e-menu">\n            <i class="w-e-icon-terminal"><i/>\n        </div>'),this.type="panel",this._active=!1}function Emoticon(editor){this.editor=editor,this.$elem=$('<div class="w-e-menu">\n            <i class="w-e-icon-happy"><i/>\n        </div>'),this.type="panel",this._active=!1}function Table(editor){this.editor=editor,this.$elem=$('<div class="w-e-menu"><i class="w-e-icon-table2"><i/></div>'),this.type="panel",this._active=!1}function Video(editor){this.editor=editor,this.$elem=$('<div class="w-e-menu"><i class="w-e-icon-play"><i/></div>'),this.type="panel",this._active=!1}function Image(editor){this.editor=editor;var imgMenuId=getRandom("w-e-img");this.$elem=$('<div class="w-e-menu" id="'+imgMenuId+'"><i class="w-e-icon-image"><i/></div>'),editor.imgMenuId=imgMenuId,this.type="panel",this._active=!1}function Hr(editor){this.editor=editor,this.$elem=$('<div class="w-e-menu">\n            <i>一<i/>\n        </div>'),this.type="click",this._active=!1}Panel.prototype={constructor:Panel,show:function show(){var _this=this,menu=this.menu;if(!(_isCreatedPanelMenus.indexOf(menu)>=0)){var editor=menu.editor,$body=$("body"),$textContainerElem=editor.$textContainerElem,opt=this.opt,$container=$('<div class="w-e-panel-container"></div>'),width=opt.width||300;$container.css("width",width+"px").css("margin-left",(0-width)/2+"px");var $closeBtn=$('<i class="w-e-icon-close w-e-panel-close"></i>');$container.append($closeBtn),$closeBtn.on("click",(function(){_this.hide()}));var $tabTitleContainer=$('<ul class="w-e-panel-tab-title"></ul>'),$tabContentContainer=$('<div class="w-e-panel-tab-content"></div>');$container.append($tabTitleContainer).append($tabContentContainer);var height=opt.height;height&&$tabContentContainer.css("height",height+"px").css("overflow-y","auto");var tabs=opt.tabs||[],tabTitleArr=[],tabContentArr=[];tabs.forEach((function(tab,tabIndex){if(tab){var title=tab.title||"",tpl=tab.tpl||"";title=replaceLang(editor,title),tpl=replaceLang(editor,tpl);var $title=$('<li class="w-e-item">'+title+"</li>");$tabTitleContainer.append($title);var $content=$(tpl);$tabContentContainer.append($content),$title._index=tabIndex,tabTitleArr.push($title),tabContentArr.push($content),0===tabIndex?($title._active=!0,$title.addClass("w-e-active")):$content.hide(),$title.on("click",(function(e){$title._active||(tabTitleArr.forEach((function($title){$title._active=!1,$title.removeClass("w-e-active")})),tabContentArr.forEach((function($content){$content.hide()})),$title._active=!0,$title.addClass("w-e-active"),$content.show())}))}})),$container.on("click",(function(e){e.stopPropagation()})),$body.on("click",(function(e){_this.hide()})),$textContainerElem.append($container),tabs.forEach((function(tab,index){tab&&(tab.events||[]).forEach((function(event){var selector=event.selector,type=event.type,fn=event.fn||emptyFn;tabContentArr[index].find(selector).on(type,(function(e){e.stopPropagation(),fn(e)&&_this.hide()}))}))}));var $inputs=$container.find("input[type=text],textarea");$inputs.length&&$inputs.get(0).focus(),this.$container=$container,this._hideOtherPanels(),_isCreatedPanelMenus.push(menu)}},hide:function hide(){var menu=this.menu,$container=this.$container;$container&&$container.remove(),_isCreatedPanelMenus=_isCreatedPanelMenus.filter((function(item){return item!==menu}))},_hideOtherPanels:function _hideOtherPanels(){_isCreatedPanelMenus.length&&_isCreatedPanelMenus.forEach((function(menu){var panel=menu.panel||{};panel.hide&&panel.hide()}))}},Link.prototype={constructor:Link,onClick:function onClick(e){var editor=this.editor,$linkelem=void 0;if(this._active){if(!($linkelem=editor.selection.getSelectionContainerElem()))return;editor.selection.createRangeByElem($linkelem),editor.selection.restoreSelection(),this._createPanel($linkelem.text(),$linkelem.attr("href"))}else editor.selection.isSelectionEmpty()?this._createPanel("",""):this._createPanel(editor.selection.getSelectionText(),"")},_createPanel:function _createPanel(text,link){var _this=this,inputLinkId=getRandom("input-link"),inputTextId=getRandom("input-text"),btnOkId=getRandom("btn-ok"),btnDelId=getRandom("btn-del"),delBtnDisplay=this._active?"inline-block":"none",panel=new Panel(this,{width:300,tabs:[{title:"链接",tpl:'<div>\n                            <input id="'+inputTextId+'" type="text" class="block" value="'+text+'" placeholder="链接文字"/></td>\n                            <input id="'+inputLinkId+'" type="text" class="block" value="'+link+'" placeholder="http://..."/></td>\n                            <div class="w-e-button-container">\n                                <button id="'+btnOkId+'" class="right">插入</button>\n                                <button id="'+btnDelId+'" class="gray right" style="display:'+delBtnDisplay+'">删除链接</button>\n                            </div>\n                        </div>',events:[{selector:"#"+btnOkId,type:"click",fn:function fn(){var $link=$("#"+inputLinkId),$text=$("#"+inputTextId),link=$link.val(),text=$text.val();return _this._insertLink(text,link),!0}},{selector:"#"+btnDelId,type:"click",fn:function fn(){return _this._delLink(),!0}}]}]});panel.show(),this.panel=panel},_delLink:function _delLink(){if(this._active){var editor=this.editor;if(editor.selection.getSelectionContainerElem()){var selectionText=editor.selection.getSelectionText();editor.cmd.do("insertHTML","<span>"+selectionText+"</span>")}}},_insertLink:function _insertLink(text,link){var editor=this.editor,config=editor.config;link.match(/^http(s)?\:\/\//)||(link="http://"+link);var linkCheck=config.linkCheck,checkResult=!0;linkCheck&&"function"==typeof linkCheck&&(checkResult=linkCheck(text,link)),!0===checkResult?editor.cmd.do("insertHTML",'<a href="'+link+'" target="_blank" style="color: #4990E2">'+text+"</a>"):alert(checkResult)},tryChangeActive:function tryChangeActive(e){var editor=this.editor,$elem=this.$elem,$selectionELem=editor.selection.getSelectionContainerElem();$selectionELem&&("A"===$selectionELem.getNodeName()?(this._active=!0,$elem.addClass("w-e-active")):(this._active=!1,$elem.removeClass("w-e-active")))}},Italic.prototype={constructor:Italic,onClick:function onClick(e){var editor=this.editor,isSeleEmpty=editor.selection.isSelectionEmpty();isSeleEmpty&&editor.selection.createEmptyRange(),editor.cmd.do("italic"),isSeleEmpty&&(editor.selection.collapseRange(),editor.selection.restoreSelection())},tryChangeActive:function tryChangeActive(e){var editor=this.editor,$elem=this.$elem;editor.cmd.queryCommandState("italic")?(this._active=!0,$elem.addClass("w-e-active")):(this._active=!1,$elem.removeClass("w-e-active"))}},Redo.prototype={constructor:Redo,onClick:function onClick(e){this.editor.cmd.do("redo")}},StrikeThrough.prototype={constructor:StrikeThrough,onClick:function onClick(e){var editor=this.editor,isSeleEmpty=editor.selection.isSelectionEmpty();isSeleEmpty&&editor.selection.createEmptyRange(),editor.cmd.do("strikeThrough"),isSeleEmpty&&(editor.selection.collapseRange(),editor.selection.restoreSelection())},tryChangeActive:function tryChangeActive(e){var editor=this.editor,$elem=this.$elem;editor.cmd.queryCommandState("strikeThrough")?(this._active=!0,$elem.addClass("w-e-active")):(this._active=!1,$elem.removeClass("w-e-active"))}},Underline.prototype={constructor:Underline,onClick:function onClick(e){var editor=this.editor,isSeleEmpty=editor.selection.isSelectionEmpty();isSeleEmpty&&editor.selection.createEmptyRange(),editor.cmd.do("underline"),isSeleEmpty&&(editor.selection.collapseRange(),editor.selection.restoreSelection())},tryChangeActive:function tryChangeActive(e){var editor=this.editor,$elem=this.$elem;editor.cmd.queryCommandState("underline")?(this._active=!0,$elem.addClass("w-e-active")):(this._active=!1,$elem.removeClass("w-e-active"))}},Undo.prototype={constructor:Undo,onClick:function onClick(e){this.editor.cmd.do("undo")}},List.prototype={constructor:List,_command:function _command(value){var editor=this.editor,$textElem=editor.$textElem;if(editor.selection.restoreSelection(),!editor.cmd.queryCommandState(value)){editor.cmd.do(value);var $selectionElem=editor.selection.getSelectionContainerElem();if("LI"===$selectionElem.getNodeName()&&($selectionElem=$selectionElem.parent()),!1!==/^ol|ul$/i.test($selectionElem.getNodeName())&&!$selectionElem.equal($textElem)){var $parent=$selectionElem.parent();$parent.equal($textElem)||($selectionElem.insertAfter($parent),$parent.remove())}}},tryChangeActive:function tryChangeActive(e){var editor=this.editor,$elem=this.$elem;editor.cmd.queryCommandState("insertUnOrderedList")||editor.cmd.queryCommandState("insertOrderedList")?(this._active=!0,$elem.addClass("w-e-active")):(this._active=!1,$elem.removeClass("w-e-active"))}},Justify.prototype={constructor:Justify,_command:function _command(value){this.editor.cmd.do(value)}},ForeColor.prototype={constructor:ForeColor,_command:function _command(value){this.editor.cmd.do("foreColor",value)}},BackColor.prototype={constructor:BackColor,_command:function _command(value){this.editor.cmd.do("backColor",value)}},Quote.prototype={constructor:Quote,onClick:function onClick(e){var editor=this.editor,$selectionElem=editor.selection.getSelectionContainerElem(),nodeName=$selectionElem.getNodeName();if(UA.isIE()){if("P"===nodeName)return $("<blockquote>"+$selectionElem.text()+"</blockquote>").insertAfter($selectionElem),void $selectionElem.remove();"BLOCKQUOTE"===nodeName&&($("<p>"+$selectionElem.text()+"</p>").insertAfter($selectionElem),$selectionElem.remove())}else"BLOCKQUOTE"===nodeName?editor.cmd.do("formatBlock","<P>"):editor.cmd.do("formatBlock","<BLOCKQUOTE>")},tryChangeActive:function tryChangeActive(e){var editor=this.editor,$elem=this.$elem,cmdValue=editor.cmd.queryCommandValue("formatBlock");/^BLOCKQUOTE$/i.test(cmdValue)?(this._active=!0,$elem.addClass("w-e-active")):(this._active=!1,$elem.removeClass("w-e-active"))}},Code.prototype={constructor:Code,onClick:function onClick(e){var editor=this.editor,$startElem=editor.selection.getSelectionStartElem(),$endElem=editor.selection.getSelectionEndElem(),isSeleEmpty=editor.selection.isSelectionEmpty(),selectionText=editor.selection.getSelectionText(),$code=void 0;if($startElem.equal($endElem))return isSeleEmpty?void(this._active?this._createPanel($startElem.html()):this._createPanel()):($code=$("<code>"+selectionText+"</code>"),editor.cmd.do("insertElem",$code),editor.selection.createRangeByElem($code,!1),void editor.selection.restoreSelection());editor.selection.restoreSelection()},_createPanel:function _createPanel(value){var _this=this,type=(value=value||"")?"edit":"new",textId=getRandom("texxt"),btnId=getRandom("btn"),panel=new Panel(this,{width:500,tabs:[{title:"插入代码",tpl:'<div>\n                        <textarea id="'+textId+'" style="height:145px;;">'+value+'</textarea>\n                        <div class="w-e-button-container">\n                            <button id="'+btnId+'" class="right">插入</button>\n                        </div>\n                    <div>',events:[{selector:"#"+btnId,type:"click",fn:function fn(){var $text=$("#"+textId),text=$text.val()||$text.html();return text=replaceHtmlSymbol(text),"new"===type?_this._insertCode(text):_this._updateCode(text),!0}}]}]});panel.show(),this.panel=panel},_insertCode:function _insertCode(value){this.editor.cmd.do("insertHTML","<pre><code>"+value+"</code></pre><p><br></p>")},_updateCode:function _updateCode(value){var editor=this.editor,$selectionELem=editor.selection.getSelectionContainerElem();$selectionELem&&($selectionELem.html(value),editor.selection.restoreSelection())},tryChangeActive:function tryChangeActive(e){var editor=this.editor,$elem=this.$elem,$selectionELem=editor.selection.getSelectionContainerElem();if($selectionELem){var $parentElem=$selectionELem.parent();"CODE"===$selectionELem.getNodeName()&&"PRE"===$parentElem.getNodeName()?(this._active=!0,$elem.addClass("w-e-active")):(this._active=!1,$elem.removeClass("w-e-active"))}}},Emoticon.prototype={constructor:Emoticon,onClick:function onClick(){this._createPanel()},_createPanel:function _createPanel(){var _this=this,faceHtml="";"😀 😃 😄 😁 😆 😅 😂  😊 😇 🙂 🙃 😉 😌 😍 😘 😗 😙 😚 😋 😜 😝 😛 🤑 🤗 🤓 😎 😏 😒 😞 😔 😟 😕 🙁  😣 😖 😫 😩 😤 😠 😡 😶 😐 😑 😯 😦 😧 😮 😲 😵 😳 😱 😨 😰 😢 😥 😭 😓 😪 😴 🙄 🤔 😬 🤐".split(/\s/).forEach((function(item){item&&(faceHtml+='<span class="w-e-item">'+item+"</span>")}));var handHtml="";"🙌 👏 👋 👍 👎 👊 ✊ ️👌 ✋ 👐 💪 🙏 ️👆 👇 👈 👉 🖕 🖐 🤘 🖖".split(/\s/).forEach((function(item){item&&(handHtml+='<span class="w-e-item">'+item+"</span>")}));var panel=new Panel(this,{width:300,height:200,tabs:[{title:"表情",tpl:'<div class="w-e-emoticon-container">'+faceHtml+"</div>",events:[{selector:"span.w-e-item",type:"click",fn:function fn(e){var target=e.target;return _this._insert(target.innerHTML),!0}}]},{title:"手势",tpl:'<div class="w-e-emoticon-container">'+handHtml+"</div>",events:[{selector:"span.w-e-item",type:"click",fn:function fn(e){var target=e.target;return _this._insert(target.innerHTML),!0}}]}]});panel.show(),this.panel=panel},_insert:function _insert(emoji){this.editor.cmd.do("insertHTML","<span>"+emoji+"</span>")}},Table.prototype={constructor:Table,onClick:function onClick(){this._active?this._createEditPanel():this._createInsertPanel()},_createInsertPanel:function _createInsertPanel(){var _this=this,btnInsertId=getRandom("btn"),textRowNum=getRandom("row"),textColNum=getRandom("col"),panel=new Panel(this,{width:250,tabs:[{title:"插入表格",tpl:'<div>\n                        <p style="text-align:left; padding:5px 0;">\n                            创建\n                            <input id="'+textRowNum+'" type="text" value="5" style="width:40px;text-align:center;"/>\n                            行\n                            <input id="'+textColNum+'" type="text" value="5" style="width:40px;text-align:center;"/>\n                            列的表格\n                        </p>\n                        <div class="w-e-button-container">\n                            <button id="'+btnInsertId+'" class="right">插入</button>\n                        </div>\n                    </div>',events:[{selector:"#"+btnInsertId,type:"click",fn:function fn(){var rowNum=parseInt($("#"+textRowNum).val()),colNum=parseInt($("#"+textColNum).val());return rowNum&&colNum&&rowNum>0&&colNum>0&&_this._insert(rowNum,colNum),!0}}]}]});panel.show(),this.panel=panel},_insert:function _insert(rowNum,colNum){var r=void 0,c=void 0,html='<table border="0" width="100%" cellpadding="0" cellspacing="0">';for(r=0;r<rowNum;r++){if(html+="<tr>",0===r)for(c=0;c<colNum;c++)html+="<th>&nbsp;</th>";else for(c=0;c<colNum;c++)html+="<td>&nbsp;</td>";html+="</tr>"}html+="</table><p><br></p>";var editor=this.editor;editor.cmd.do("insertHTML",html),editor.cmd.do("enableObjectResizing",!1),editor.cmd.do("enableInlineTableEditing",!1)},_createEditPanel:function _createEditPanel(){var _this2=this,addRowBtnId=getRandom("add-row"),addColBtnId=getRandom("add-col"),delRowBtnId=getRandom("del-row"),delColBtnId=getRandom("del-col"),delTableBtnId=getRandom("del-table");new Panel(this,{width:320,tabs:[{title:"编辑表格",tpl:'<div>\n                        <div class="w-e-button-container" style="border-bottom:1px solid #f1f1f1;padding-bottom:5px;margin-bottom:5px;">\n                            <button id="'+addRowBtnId+'" class="left">增加行</button>\n                            <button id="'+delRowBtnId+'" class="red left">删除行</button>\n                            <button id="'+addColBtnId+'" class="left">增加列</button>\n                            <button id="'+delColBtnId+'" class="red left">删除列</button>\n                        </div>\n                        <div class="w-e-button-container">\n                            <button id="'+delTableBtnId+'" class="gray left">删除表格</button>\n                        </dv>\n                    </div>',events:[{selector:"#"+addRowBtnId,type:"click",fn:function fn(){return _this2._addRow(),!0}},{selector:"#"+addColBtnId,type:"click",fn:function fn(){return _this2._addCol(),!0}},{selector:"#"+delRowBtnId,type:"click",fn:function fn(){return _this2._delRow(),!0}},{selector:"#"+delColBtnId,type:"click",fn:function fn(){return _this2._delCol(),!0}},{selector:"#"+delTableBtnId,type:"click",fn:function fn(){return _this2._delTable(),!0}}]}]}).show()},_getLocationData:function _getLocationData(){var result={},$selectionELem=this.editor.selection.getSelectionContainerElem();if($selectionELem){var nodeName=$selectionELem.getNodeName();if("TD"===nodeName||"TH"===nodeName){var $tr=$selectionELem.parent(),$tds=$tr.children(),tdLength=$tds.length;$tds.forEach((function(td,index){if(td===$selectionELem[0])return result.td={index:index,elem:td,length:tdLength},!1}));var $trs=$tr.parent().children(),trLength=$trs.length;return $trs.forEach((function(tr,index){if(tr===$tr[0])return result.tr={index:index,elem:tr,length:trLength},!1})),result}}},_addRow:function _addRow(){var locationData=this._getLocationData();if(locationData){var $currentTr=$(locationData.tr.elem),tdLength=locationData.td.length,newTr=document.createElement("tr"),tpl="",i=void 0;for(i=0;i<tdLength;i++)tpl+="<td>&nbsp;</td>";newTr.innerHTML=tpl,$(newTr).insertAfter($currentTr)}},_addCol:function _addCol(){var locationData=this._getLocationData();if(locationData){var trData=locationData.tr,tdIndex=locationData.td.index;$(trData.elem).parent().children().forEach((function(tr){var $currentTd=$(tr).children().get(tdIndex),name=$currentTd.getNodeName().toLowerCase();$(document.createElement(name)).insertAfter($currentTd)}))}},_delRow:function _delRow(){var locationData=this._getLocationData();locationData&&$(locationData.tr.elem).remove()},_delCol:function _delCol(){var locationData=this._getLocationData();if(locationData){var trData=locationData.tr,tdIndex=locationData.td.index;$(trData.elem).parent().children().forEach((function(tr){$(tr).children().get(tdIndex).remove()}))}},_delTable:function _delTable(){var $selectionELem=this.editor.selection.getSelectionContainerElem();if($selectionELem){var $table=$selectionELem.parentUntil("table");$table&&$table.remove()}},tryChangeActive:function tryChangeActive(e){var editor=this.editor,$elem=this.$elem,$selectionELem=editor.selection.getSelectionContainerElem();if($selectionELem){var nodeName=$selectionELem.getNodeName();"TD"===nodeName||"TH"===nodeName?(this._active=!0,$elem.addClass("w-e-active")):(this._active=!1,$elem.removeClass("w-e-active"))}}},Video.prototype={constructor:Video,onClick:function onClick(){this._createPanel()},_createPanel:function _createPanel(){var _this=this,textValId=getRandom("text-val"),btnId=getRandom("btn"),panel=new Panel(this,{width:350,tabs:[{title:"插入视频",tpl:'<div>\n                        <input id="'+textValId+'" type="text" class="block" placeholder="格式如：<iframe src=... ></iframe>"/>\n                        <div class="w-e-button-container">\n                            <button id="'+btnId+'" class="right">插入</button>\n                        </div>\n                    </div>',events:[{selector:"#"+btnId,type:"click",fn:function fn(){var val=$("#"+textValId).val().trim();return val&&_this._insert(val),!0}}]}]});panel.show(),this.panel=panel},_insert:function _insert(val){this.editor.cmd.do("insertHTML",val+"<p><br></p>")}},Image.prototype={constructor:Image,onClick:function onClick(){this.editor.config.qiniu||(this._active?this._createEditPanel():this._createInsertPanel())},_createEditPanel:function _createEditPanel(){var editor=this.editor,width30=getRandom("width-30"),width50=getRandom("width-50"),width100=getRandom("width-100"),delBtn=getRandom("del-btn"),panel=new Panel(this,{width:300,tabs:[{title:"编辑图片",tpl:'<div>\n                    <div class="w-e-button-container" style="border-bottom:1px solid #f1f1f1;padding-bottom:5px;margin-bottom:5px;">\n                        <span style="float:left;font-size:14px;margin:4px 5px 0 5px;color:#333;">最大宽度：</span>\n                        <button id="'+width30+'" class="left">30%</button>\n                        <button id="'+width50+'" class="left">50%</button>\n                        <button id="'+width100+'" class="left">100%</button>\n                    </div>\n                    <div class="w-e-button-container">\n                        <button id="'+delBtn+'" class="gray left">删除图片</button>\n                    </dv>\n                </div>',events:[{selector:"#"+width30,type:"click",fn:function fn(){var $img=editor._selectedImg;return $img&&$img.css("max-width","30%"),!0}},{selector:"#"+width50,type:"click",fn:function fn(){var $img=editor._selectedImg;return $img&&$img.css("max-width","50%"),!0}},{selector:"#"+width100,type:"click",fn:function fn(){var $img=editor._selectedImg;return $img&&$img.css("max-width","100%"),!0}},{selector:"#"+delBtn,type:"click",fn:function fn(){var $img=editor._selectedImg;return $img&&$img.remove(),!0}}]}]});panel.show(),this.panel=panel},_createInsertPanel:function _createInsertPanel(){var editor=this.editor,uploadImg=editor.uploadImg,config=editor.config,upTriggerId=getRandom("up-trigger"),upFileId=getRandom("up-file"),linkUrlId=getRandom("link-url"),linkBtnId=getRandom("link-btn"),tabsConfig=[{title:"上传图片",tpl:'<div class="w-e-up-img-container">\n                    <div id="'+upTriggerId+'" class="w-e-up-btn">\n                        <i class="w-e-icon-upload2"></i>\n                    </div>\n                    <div style="display:none;">\n                        <input id="'+upFileId+'" type="file"  accept=".PNG,.GIF,.BMP,.JPEG,.JPG"/>\n                    </div>\n                </div>',events:[{selector:"#"+upTriggerId,type:"click",fn:function fn(){var fileElem=$("#"+upFileId)[0];if(!fileElem)return!0;fileElem.click()}},{selector:"#"+upFileId,type:"change",fn:function fn(){var fileElem=$("#"+upFileId)[0];if(!fileElem)return!0;var fileList=fileElem.files;return fileList.length&&uploadImg.uploadImg(fileList),!0}}]},{title:"网络图片",tpl:'<div>\n                    <input id="'+linkUrlId+'" type="text" class="block" placeholder="图片链接"/></td>\n                    <div class="w-e-button-container">\n                        <button id="'+linkBtnId+'" class="right">插入</button>\n                    </div>\n                </div>',events:[{selector:"#"+linkBtnId,type:"click",fn:function fn(){var url=$("#"+linkUrlId).val().trim();return url&&uploadImg.insertLinkImg(url),!0}}]}],tabsConfigResult=[];(config.uploadImgShowBase64||config.uploadImgServer||config.customUploadImg)&&window.FileReader&&tabsConfigResult.push(tabsConfig[0]),config.showLinkImg&&tabsConfigResult.push(tabsConfig[1]);var panel=new Panel(this,{width:300,tabs:tabsConfigResult});panel.show(),this.panel=panel},tryChangeActive:function tryChangeActive(e){var editor=this.editor,$elem=this.$elem;editor._selectedImg?(this._active=!0,$elem.addClass("w-e-active")):(this._active=!1,$elem.removeClass("w-e-active"))}},Hr.prototype={constructor:Hr,onClick:function onClick(e){this.editor.cmd.do("insertHTML",'<hr style="margin: 25px auto; border-top: 0px; background: rgb(216, 216, 216); height: 1px; width: 50%" />')}};var MenuConstructors={};function Menus(editor){this.editor=editor,this.menus={}}function getPasteText(e){var clipboardData=e.clipboardData||e.originalEvent&&e.originalEvent.clipboardData;return replaceHtmlSymbol(null==clipboardData?window.clipboardData&&window.clipboardData.getData("text"):clipboardData.getData("text/plain"))}function Text(editor){this.editor=editor}function Command(editor){this.editor=editor}function API(editor){this.editor=editor,this._currentRange=null}function Progress(editor){this.editor=editor,this._time=0,this._isShow=!1,this._isRender=!1,this._timeoutId=0,this.$textContainer=editor.$textContainerElem,this.$bar=$('<div class="w-e-progress"></div>')}MenuConstructors.bold=Bold,MenuConstructors.head=Head,MenuConstructors.link=Link,MenuConstructors.italic=Italic,MenuConstructors.redo=Redo,MenuConstructors.strikeThrough=StrikeThrough,MenuConstructors.underline=Underline,MenuConstructors.undo=Undo,MenuConstructors.list=List,MenuConstructors.justify=Justify,MenuConstructors.foreColor=ForeColor,MenuConstructors.backColor=BackColor,MenuConstructors.quote=Quote,MenuConstructors.code=Code,MenuConstructors.emoticon=Emoticon,MenuConstructors.table=Table,MenuConstructors.video=Video,MenuConstructors.image=Image,MenuConstructors.hr=Hr,Menus.prototype={constructor:Menus,init:function init(){var _this=this,editor=this.editor;((editor.config||{}).menus||[]).forEach((function(menuKey){var MenuConstructor=MenuConstructors[menuKey];MenuConstructor&&"function"==typeof MenuConstructor&&(_this.menus[menuKey]=new MenuConstructor(editor))})),this._addToToolbar(),this._bindEvent()},_addToToolbar:function _addToToolbar(){var editor=this.editor,$toolbarElem=editor.$toolbarElem,menus=this.menus,zIndex=editor.config.zIndex+1;objForEach(menus,(function(key,menu){var $elem=menu.$elem;$elem&&($elem.css("z-index",zIndex),$toolbarElem.append($elem))}))},_bindEvent:function _bindEvent(){var menus=this.menus,editor=this.editor;objForEach(menus,(function(key,menu){var type=menu.type;if(type){var $elem=menu.$elem,droplist=menu.droplist;menu.panel;"click"===type&&menu.onClick&&$elem.on("click",(function(e){null!=editor.selection.getRange()&&menu.onClick(e)})),"droplist"===type&&droplist&&$elem.on("mouseenter",(function(e){null!=editor.selection.getRange()&&(droplist.showTimeoutId=setTimeout((function(){droplist.show()}),200))})).on("mouseleave",(function(e){droplist.hideTimeoutId=setTimeout((function(){droplist.hide()}),0)})),"panel"===type&&menu.onClick&&$elem.on("click",(function(e){e.stopPropagation(),null!=editor.selection.getRange()&&menu.onClick(e)}))}}))},changeActive:function changeActive(){objForEach(this.menus,(function(key,menu){menu.tryChangeActive&&setTimeout((function(){menu.tryChangeActive()}),100)}))}},Text.prototype={constructor:Text,init:function init(){this._bindEvent()},clear:function clear(){this.html("<p><br></p>")},html:function html(val){var editor=this.editor,$textElem=editor.$textElem;if(null==val)return $textElem.html();$textElem.html(val),editor.initSelection()},text:function text(val){var editor=this.editor,$textElem=editor.$textElem;if(null==val)return $textElem.text();$textElem.text("<p>"+val+"</p>"),editor.initSelection()},append:function append(html){var editor=this.editor;editor.$textElem.append($(html)),editor.initSelection()},_bindEvent:function _bindEvent(){this._saveRangeRealTime(),this._enterKeyHandle(),this._clearHandle(),this._pasteHandle(),this._tabHandle(),this._imgHandle(),this._dragHandle()},_saveRangeRealTime:function _saveRangeRealTime(){var editor=this.editor,$textElem=editor.$textElem;function saveRange(e){editor.selection.saveRange(),editor.menus.changeActive()}$textElem.on("keyup",saveRange),$textElem.on("mousedown",(function(e){$textElem.on("mouseleave",saveRange)})),$textElem.on("mouseup",(function(e){saveRange(),$textElem.off("mouseleave",saveRange)}))},_enterKeyHandle:function _enterKeyHandle(){var editor=this.editor,$textElem=editor.$textElem;$textElem.on("keyup",(function(e){13===e.keyCode&&function pHandle(e){var $selectionElem=editor.selection.getSelectionContainerElem();if($selectionElem.parent().equal($textElem)&&"P"!==$selectionElem.getNodeName()&&!$selectionElem.text()){var $p=$("<p><br></p>");$p.insertBefore($selectionElem),editor.selection.createRangeByElem($p,!0),editor.selection.restoreSelection(),$selectionElem.remove()}}()})),$textElem.on("keydown",(function(e){13===e.keyCode?function codeHandle(e){var $selectionElem=editor.selection.getSelectionContainerElem();if($selectionElem){var $parentElem=$selectionElem.parent(),selectionNodeName=$selectionElem.getNodeName(),parentNodeName=$parentElem.getNodeName();if("CODE"===selectionNodeName&&"PRE"===parentNodeName&&editor.cmd.queryCommandSupported("insertHTML")){if(!0===editor._willBreakCode){var $p=$("<p><br></p>");return $p.insertAfter($parentElem),editor.selection.createRangeByElem($p,!0),editor.selection.restoreSelection(),editor._willBreakCode=!1,void e.preventDefault()}var _startOffset=editor.selection.getRange().startOffset;editor.cmd.do("insertHTML","\n"),editor.selection.saveRange(),editor.selection.getRange().startOffset===_startOffset&&editor.cmd.do("insertHTML","\n");var codeLength=$selectionElem.html().length;editor.selection.getRange().startOffset+1===codeLength&&(editor._willBreakCode=!0),e.preventDefault()}}}(e):editor._willBreakCode=!1}))},_clearHandle:function _clearHandle(){var editor=this.editor,$textElem=editor.$textElem;$textElem.on("keydown",(function(e){8===e.keyCode&&("<p><br></p>"===$textElem.html().toLowerCase().trim()&&e.preventDefault())})),$textElem.on("keyup",(function(e){if(8===e.keyCode){var $p=void 0,txtHtml=$textElem.html().toLowerCase().trim();txtHtml&&"<br>"!==txtHtml||($p=$("<p><br/></p>"),$textElem.html(""),$textElem.append($p),editor.selection.createRangeByElem($p,!1,!0),editor.selection.restoreSelection())}}))},_pasteHandle:function _pasteHandle(){var editor=this.editor,pasteFilterStyle=editor.config.pasteFilterStyle,$textElem=editor.$textElem;$textElem.on("paste",(function(e){if(!UA.isIE()){e.preventDefault();var pasteHtml=function getPasteHtml(e,filterStyle){var clipboardData=e.clipboardData||e.originalEvent&&e.originalEvent.clipboardData,pasteText=void 0,pasteHtml=void 0;if(null==clipboardData?pasteText=window.clipboardData&&window.clipboardData.getData("text"):(pasteText=clipboardData.getData("text/plain"),pasteHtml=clipboardData.getData("text/html")),!pasteHtml&&pasteText&&(pasteHtml="<p>"+replaceHtmlSymbol(pasteText)+"</p>"),pasteHtml){var docSplitHtml=pasteHtml.split("</html>");return 2===docSplitHtml.length&&(pasteHtml=docSplitHtml[0]),pasteHtml=(pasteHtml=pasteHtml.replace(/<(meta|script|link).+?>/gim,"")).replace(/<!--.*?-->/gm,""),pasteHtml=(pasteHtml=filterStyle?pasteHtml.replace(/\s?(class|style)=('|").+?('|")/gim,""):pasteHtml.replace(/\s?class=('|").+?('|")/gim,"")).replace(/<html[\s\S]*head>/gim,"")}}(e,pasteFilterStyle),pasteText=getPasteText(e);pasteText=pasteText.replace(/\n/gm,"<br>");var $selectionElem=editor.selection.getSelectionContainerElem();if($selectionElem){var nodeName=$selectionElem.getNodeName();if("CODE"!==nodeName&&"PRE"!==nodeName){if(pasteHtml)try{editor.cmd.do("insertHTML",pasteHtml)}catch(ex){editor.cmd.do("insertHTML","<p>"+pasteText+"</p>")}}else editor.cmd.do("insertHTML","<p>"+pasteText+"</p>")}}})),$textElem.on("paste",(function(e){if(!UA.isIE()){e.preventDefault();var pasteFiles=function getPasteImgs(e){var result=[];if(getPasteText(e))return result;var items=(e.clipboardData||e.originalEvent&&e.originalEvent.clipboardData||{}).items;return items?(objForEach(items,(function(key,value){var type=value.type;/image/i.test(type)&&result.push(value.getAsFile())})),result):result}(e);if(pasteFiles&&pasteFiles.length){var $selectionElem=editor.selection.getSelectionContainerElem();if($selectionElem){var nodeName=$selectionElem.getNodeName();if("CODE"!==nodeName&&"PRE"!==nodeName)editor.uploadImg.uploadImg(pasteFiles)}}}}))},_tabHandle:function _tabHandle(){var editor=this.editor;editor.$textElem.on("keydown",(function(e){if(9===e.keyCode&&editor.cmd.queryCommandSupported("insertHTML")){var $selectionElem=editor.selection.getSelectionContainerElem();if($selectionElem){var $parentElem=$selectionElem.parent(),selectionNodeName=$selectionElem.getNodeName(),parentNodeName=$parentElem.getNodeName();"CODE"===selectionNodeName&&"PRE"===parentNodeName?editor.cmd.do("insertHTML","    "):editor.cmd.do("insertHTML","&nbsp;&nbsp;&nbsp;&nbsp;"),e.preventDefault()}}}))},_imgHandle:function _imgHandle(){var editor=this.editor,$textElem=editor.$textElem;$textElem.on("click","img",(function(e){var $img=$(this);$textElem.find("img").removeClass("w-e-selected"),$img.addClass("w-e-selected"),editor._selectedImg=$img,editor.selection.createRangeByElem($img)})),$textElem.on("click  keyup",(function(e){e.target.matches("img")||($textElem.find("img").removeClass("w-e-selected"),editor._selectedImg=null)}))},_dragHandle:function _dragHandle(){var editor=this.editor;$(document).on("dragleave drop dragenter dragover",(function(e){e.preventDefault()})),editor.$textElem.on("drop",(function(e){e.preventDefault();var files=e.dataTransfer&&e.dataTransfer.files;files&&files.length&&editor.uploadImg.uploadImg(files)}))}},Command.prototype={constructor:Command,do:function _do(name,value){var editor=this.editor;if(editor.selection.getRange()){editor.selection.restoreSelection();var _name="_"+name;this[_name]?this[_name](value):this._execCommand(name,value),editor.menus.changeActive(),editor.selection.saveRange(),editor.selection.restoreSelection();var compareEveryChar=!1;["insertOrderedList","insertUnorderedList"].indexOf(name)>=0&&(compareEveryChar=!0),editor.change&&editor.change(compareEveryChar)}},_insertHTML:function _insertHTML(html){var range=this.editor.selection.getRange();this.queryCommandSupported("insertHTML")?this._execCommand("insertHTML",html):range.insertNode?(range.deleteContents(),range.insertNode($(html)[0])):range.pasteHTML&&range.pasteHTML(html)},_insertElem:function _insertElem($elem){var range=this.editor.selection.getRange();range.insertNode&&(range.deleteContents(),range.insertNode($elem[0]))},_execCommand:function _execCommand(name,value){document.execCommand(name,!1,value)},queryCommandValue:function queryCommandValue(name){return document.queryCommandValue(name)},queryCommandState:function queryCommandState(name){return document.queryCommandState(name)},queryCommandSupported:function queryCommandSupported(name){return document.queryCommandSupported(name)}},API.prototype={constructor:API,getRange:function getRange(){return this._currentRange},saveRange:function saveRange(_range){if(_range)this._currentRange=_range;else{var selection=window.getSelection();if(0!==selection.rangeCount){var range=selection.getRangeAt(0),$containerElem=this.getSelectionContainerElem(range);if($containerElem)this.editor.$textElem.isContain($containerElem)&&(this._currentRange=range)}}},collapseRange:function collapseRange(toStart){null==toStart&&(toStart=!1);var range=this._currentRange;range&&range.collapse(toStart)},getSelectionText:function getSelectionText(){return this._currentRange?this._currentRange.toString():""},getSelectionContainerElem:function getSelectionContainerElem(range){var elem=void 0;if(range=range||this._currentRange)return $(1===(elem=range.commonAncestorContainer).nodeType?elem:elem.parentNode)},getSelectionStartElem:function getSelectionStartElem(range){var elem=void 0;if(range=range||this._currentRange)return $(1===(elem=range.startContainer).nodeType?elem:elem.parentNode)},getSelectionEndElem:function getSelectionEndElem(range){var elem=void 0;if(range=range||this._currentRange)return $(1===(elem=range.endContainer).nodeType?elem:elem.parentNode)},isSelectionEmpty:function isSelectionEmpty(){var range=this._currentRange;return!(!range||!range.startContainer||range.startContainer!==range.endContainer||range.startOffset!==range.endOffset)},restoreSelection:function restoreSelection(){var selection=window.getSelection();selection.removeAllRanges(),selection.addRange(this._currentRange)},createEmptyRange:function createEmptyRange(){var editor=this.editor,range=this.getRange(),$elem=void 0;if(range&&this.isSelectionEmpty())try{UA.isWebkit()?(editor.cmd.do("insertHTML","&#8203;"),range.setEnd(range.endContainer,range.endOffset+1),this.saveRange(range)):($elem=$("<strong>&#8203;</strong>"),editor.cmd.do("insertElem",$elem),this.createRangeByElem($elem,!0))}catch(ex){}},createRangeByElem:function createRangeByElem($elem,toStart,isContent){if($elem.length){var elem=$elem[0],range=document.createRange();isContent?range.selectNodeContents(elem):range.selectNode(elem),"boolean"==typeof toStart&&range.collapse(toStart),this.saveRange(range)}}},Progress.prototype={constructor:Progress,show:function show(progress){var _this=this;if(!this._isShow){this._isShow=!0;var $bar=this.$bar;if(this._isRender)this._isRender=!0;else this.$textContainer.append($bar);Date.now()-this._time>100&&progress<=1&&($bar.css("width",100*progress+"%"),this._time=Date.now());var timeoutId=this._timeoutId;timeoutId&&clearTimeout(timeoutId),timeoutId=setTimeout((function(){_this._hide()}),500)}},_hide:function _hide(){this.$bar.remove(),this._time=0,this._isShow=!1,this._isRender=!1}};var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};function UploadImg(editor){this.editor=editor}UploadImg.prototype={constructor:UploadImg,_alert:function _alert(alertInfo,debugInfo){var editor=this.editor,debug=editor.config.debug,customAlert=editor.config.customAlert;if(customAlert&&"function"==typeof customAlert?customAlert(alertInfo,debugInfo):alert(alertInfo,debugInfo),debug)throw new Error("wangEditor: "+(debugInfo||alertInfo))},insertLinkImg:function insertLinkImg(link){var _this2=this;if(link){var editor=this.editor,config=editor.config;editor.cmd.do("insertHTML",'<img src="'+link+'" style="max-width:100%;"/>');var img=document.createElement("img");img.onload=function(){var callback=config.linkImgCallback;callback&&"function"==typeof callback&&callback(link),img=null},img.onerror=function(){img=null,_this2._alert("插入图片错误",'wangEditor: 插入图片出错，图片链接是 "'+link+'"，下载该链接失败')},img.onabort=function(){img=null},img.src=link}},uploadImg:function uploadImg(files){var _this3=this;if(files&&files.length){var editor=this.editor,config=editor.config,uploadImgServer=config.uploadImgServer,uploadImgShowBase64=config.uploadImgShowBase64,maxSize=config.uploadImgMaxSize,maxSizeM=maxSize/1e3/1e3,maxLength=config.uploadImgMaxLength||1e4,uploadFileName=config.uploadFileName||"",uploadImgParams=config.uploadImgParams||{},uploadImgParamsWithUrl=config.uploadImgParamsWithUrl,uploadImgHeaders=config.uploadImgHeaders||{},hooks=config.uploadImgHooks||{},timeout=config.uploadImgTimeout||3e3,withCredentials=config.withCredentials;null==withCredentials&&(withCredentials=!1);var customUploadImg=config.customUploadImg;if(customUploadImg||uploadImgServer||uploadImgShowBase64){var resultFiles=[],errInfo=[];if(arrForEach(files,(function(file){var name=file.name,size=file.size;if(name&&size)return!1===/\.(jpg|jpeg|png|bmp|gif)$/i.test(name)?(errInfo.push("【"+name+"】不是图片"),void(customUploadImg.accept&&customUploadImg.accept())):void(maxSize<size?errInfo.push("【"+name+"】大于 "+maxSizeM+"M"):resultFiles.push(file))})),errInfo.length)this._alert(errInfo.join("\n"));else if(resultFiles.length>maxLength)this._alert("一次最多上传"+maxLength+"张图片");else if(customUploadImg&&"function"==typeof customUploadImg)customUploadImg(resultFiles,this.insertLinkImg.bind(this));else{var formdata=new window.FormData;if(arrForEach(resultFiles,(function(file){var name=uploadFileName||file.name;formdata.append(name,file)})),uploadImgServer&&"string"==typeof uploadImgServer){var uploadImgServerArr=uploadImgServer.split("#");uploadImgServer=uploadImgServerArr[0];var uploadImgServerHash=uploadImgServerArr[1]||"";objForEach(uploadImgParams,(function(key,val){val=encodeURIComponent(val),uploadImgParamsWithUrl&&(uploadImgServer.indexOf("?")>0?uploadImgServer+="&":uploadImgServer+="?",uploadImgServer=uploadImgServer+key+"="+val),formdata.append(key,val)})),uploadImgServerHash&&(uploadImgServer+="#"+uploadImgServerHash);var xhr=new XMLHttpRequest;if(xhr.open("POST",uploadImgServer),xhr.timeout=timeout,xhr.ontimeout=function(){hooks.timeout&&"function"==typeof hooks.timeout&&hooks.timeout(xhr,editor),_this3._alert("上传图片超时")},xhr.upload&&(xhr.upload.onprogress=function(e){var percent=void 0,progressBar=new Progress(editor);e.lengthComputable&&(percent=e.loaded/e.total,progressBar.show(percent))}),xhr.onreadystatechange=function(){var result=void 0;if(4===xhr.readyState){if(xhr.status<200||xhr.status>=300)return hooks.error&&"function"==typeof hooks.error&&hooks.error(xhr,editor),void _this3._alert("上传图片发生错误","上传图片发生错误，服务器返回状态是 "+xhr.status);if("object"!==(void 0===(result=xhr.responseText)?"undefined":_typeof(result)))try{result=JSON.parse(result)}catch(ex){return hooks.fail&&"function"==typeof hooks.fail&&hooks.fail(xhr,editor,result),void _this3._alert("上传图片失败","上传图片返回结果错误，返回结果是: "+result)}if(hooks.customInsert||"0"==result.errno){if(hooks.customInsert&&"function"==typeof hooks.customInsert)hooks.customInsert(_this3.insertLinkImg.bind(_this3),result,editor);else(result.data||[]).forEach((function(link){_this3.insertLinkImg(link)}));hooks.success&&"function"==typeof hooks.success&&hooks.success(xhr,editor,result)}else hooks.fail&&"function"==typeof hooks.fail&&hooks.fail(xhr,editor,result),_this3._alert("上传图片失败","上传图片返回结果错误，返回结果 errno="+result.errno)}},hooks.before&&"function"==typeof hooks.before){var beforeResult=hooks.before(xhr,editor,resultFiles);if(beforeResult&&"object"===(void 0===beforeResult?"undefined":_typeof(beforeResult))&&beforeResult.prevent)return void this._alert(beforeResult.msg)}return objForEach(uploadImgHeaders,(function(key,val){xhr.setRequestHeader(key,val)})),xhr.withCredentials=withCredentials,void xhr.send(formdata)}uploadImgShowBase64&&arrForEach(files,(function(file){var _this=_this3,reader=new FileReader;reader.readAsDataURL(file),reader.onload=function(){_this.insertLinkImg(this.result)}}))}}}}};var editorId=1;function Editor(toolbarSelector,textSelector){if(null==toolbarSelector)throw new Error("错误：初始化编辑器时候未传入任何参数，请查阅文档");this.id="wangEditor-"+editorId++,this.toolbarSelector=toolbarSelector,this.textSelector=textSelector,this.customConfig={}}Editor.prototype={constructor:Editor,_initConfig:function _initConfig(){this.config=Object.assign({},config,this.customConfig);var langConfig=this.config.lang||{},langArgs=[];objForEach(langConfig,(function(key,val){langArgs.push({reg:new RegExp(key,"img"),val:val})})),this.config.langArgs=langArgs},_initDom:function _initDom(){var _this=this,$toolbarSelector=$(this.toolbarSelector),textSelector=this.textSelector,config$$1=this.config,zIndex=config$$1.zIndex,$toolbarElem=void 0,$textContainerElem=void 0,$textElem=void 0,$children=void 0;null==textSelector?($toolbarElem=$("<div></div>"),$textContainerElem=$("<div></div>"),$children=$toolbarSelector.children(),$toolbarSelector.append($toolbarElem).append($textContainerElem),$toolbarElem.css("background-color","#f1f1f1").css("border","1px solid #ccc"),$textContainerElem.css("border","1px solid #ccc").css("border-top","none").css("height","300px")):($toolbarElem=$toolbarSelector,$children=($textContainerElem=$(textSelector)).children()),($textElem=$("<div></div>")).attr("contenteditable","true").css("width","100%").css("height","100%"),$children&&$children.length?$textElem.append($children):$textElem.append($("<p><br></p>")),$textContainerElem.append($textElem),$toolbarElem.addClass("w-e-toolbar"),$textContainerElem.addClass("w-e-text-container"),$textContainerElem.css("z-index",zIndex),$textElem.addClass("w-e-text");var toolbarElemId=getRandom("toolbar-elem");$toolbarElem.attr("id",toolbarElemId);var textElemId=getRandom("text-elem");$textElem.attr("id",textElemId),this.$toolbarElem=$toolbarElem,this.$textContainerElem=$textContainerElem,this.$textElem=$textElem,this.toolbarElemId=toolbarElemId,this.textElemId=textElemId,$textContainerElem.on("click keyup",(function(){_this.change&&_this.change()})),$toolbarElem.on("click",(function(){this.change&&this.change()})),(config$$1.onfocus||config$$1.onblur)&&(this.isFocus=!1,$(document).on("click",(function(e){$textElem.isContain($(e.target))?(_this.isFocus||_this.onfocus&&_this.onfocus(),_this.isFocus=!0):(_this.isFocus&&_this.onblur&&_this.onblur(),_this.isFocus=!1)})))},_initCommand:function _initCommand(){this.cmd=new Command(this)},_initSelectionAPI:function _initSelectionAPI(){this.selection=new API(this)},_initUploadImg:function _initUploadImg(){this.uploadImg=new UploadImg(this)},_initMenus:function _initMenus(){this.menus=new Menus(this),this.menus.init()},_initText:function _initText(){this.txt=new Text(this),this.txt.init()},initSelection:function initSelection(newLine){var $textElem=this.$textElem,$children=$textElem.children();if(!$children.length)return $textElem.append($("<p><br></p>")),void this.initSelection();var $last=$children.last();if(newLine){var html=$last.html().toLowerCase(),nodeName=$last.getNodeName();if("<br>"!==html&&"<br/>"!==html||"P"!==nodeName)return $textElem.append($("<p><br></p>")),void this.initSelection()}this.selection.createRangeByElem($last,!1,!0)},_bindEvent:function _bindEvent(){var onChangeTimeoutId=0,beforeChangeHtml=this.txt.html(),config$$1=this.config,onchangeTimeout=config$$1.onchangeTimeout;(!(onchangeTimeout=parseInt(onchangeTimeout,10))||onchangeTimeout<=0)&&(onchangeTimeout=200);var onchange=config$$1.onchange;onchange&&"function"==typeof onchange&&(this.change=function(compareEveryChar){var currentHtml=this.txt.html(),currentText=this.txt.text();if(currentHtml.length===beforeChangeHtml.length){if(!compareEveryChar)return;if(currentHtml===beforeChangeHtml)return}onChangeTimeoutId&&clearTimeout(onChangeTimeoutId),onChangeTimeoutId=setTimeout((function(){onchange(currentHtml,currentText),beforeChangeHtml=currentHtml}),onchangeTimeout)});var onblur=config$$1.onblur;onblur&&"function"==typeof onblur&&(this.onblur=function(){var currentHtml=this.txt.html();onblur(currentHtml)});var onfocus=config$$1.onfocus;onfocus&&"function"==typeof onfocus&&(this.onfocus=function(){var currentHtml=this.txt.html();onfocus(currentHtml)})},create:function create(){this._initConfig(),this._initDom(),this._initCommand(),this._initSelectionAPI(),this._initText(),this._initMenus(),this._initUploadImg(),this.initSelection(!0),this._bindEvent()}};try{document}catch(ex){throw new Error("请在浏览器环境下运行")}!function polyfill(){"function"!=typeof Object.assign&&(Object.assign=function(target,varArgs){if(null==target)throw new TypeError("Cannot convert undefined or null to object");for(var to=Object(target),index=1;index<arguments.length;index++){var nextSource=arguments[index];if(null!=nextSource)for(var nextKey in nextSource)Object.prototype.hasOwnProperty.call(nextSource,nextKey)&&(to[nextKey]=nextSource[nextKey])}return to}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(s){for(var matches=(this.document||this.ownerDocument).querySelectorAll(s),i=matches.length;--i>=0&&matches.item(i)!==this;);return i>-1})}();var style=document.createElement("style");return style.type="text/css",style.innerHTML='.w-e-toolbar,.w-e-text-container,.w-e-menu-panel {  padding: 0;  margin: 0;  box-sizing: border-box;}.w-e-toolbar *,.w-e-text-container *,.w-e-menu-panel * {  padding: 0;  margin: 0;  box-sizing: border-box;}.w-e-clear-fix:after {  content: "";  display: table;  clear: both;}.w-e-toolbar .w-e-droplist {  position: absolute;  left: 0;  top: 0;  background-color: #fff;  border: 1px solid #f1f1f1;  border-right-color: #ccc;  border-bottom-color: #ccc;}.w-e-toolbar .w-e-droplist .w-e-dp-title {  text-align: center;  color: #999;  line-height: 2;  border-bottom: 1px solid #f1f1f1;  font-size: 13px;}.w-e-toolbar .w-e-droplist ul.w-e-list {  list-style: none;  line-height: 1;}.w-e-toolbar .w-e-droplist ul.w-e-list li.w-e-item {  color: #333;  padding: 5px 0;}.w-e-toolbar .w-e-droplist ul.w-e-list li.w-e-item:hover {  background-color: #f1f1f1;}.w-e-toolbar .w-e-droplist ul.w-e-block {  list-style: none;  text-align: left;  padding: 5px;}.w-e-toolbar .w-e-droplist ul.w-e-block li.w-e-item {  display: inline-block;  *display: inline;  *zoom: 1;  padding: 3px 5px;}.w-e-toolbar .w-e-droplist ul.w-e-block li.w-e-item:hover {  background-color: #f1f1f1;}@font-face {  font-family: \'w-e-icon\';  src: url(data:application/x-font-woff;charset=utf-8;base64,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) format(\'truetype\');  font-weight: normal;  font-style: normal;}[class^="w-e-icon-"],[class*=" w-e-icon-"] {  /* use !important to prevent issues with browser extensions that change fonts */  font-family: \'w-e-icon\' !important;  speak: none;  font-style: normal;  font-weight: normal;  font-variant: normal;  text-transform: none;  line-height: 1;  /* Better Font Rendering =========== */  -webkit-font-smoothing: antialiased;  -moz-osx-font-smoothing: grayscale;}.w-e-icon-close:before {  content: "\\f00d";}.w-e-icon-upload2:before {  content: "\\e9c6";}.w-e-icon-trash-o:before {  content: "\\f014";}.w-e-icon-header:before {  content: "\\f1dc";}.w-e-icon-pencil2:before {  content: "\\e906";}.w-e-icon-paint-brush:before {  content: "\\f1fc";}.w-e-icon-image:before {  content: "\\e90d";}.w-e-icon-play:before {  content: "\\e912";}.w-e-icon-location:before {  content: "\\e947";}.w-e-icon-undo:before {  content: "\\e965";}.w-e-icon-redo:before {  content: "\\e966";}.w-e-icon-quotes-left:before {  content: "\\e977";}.w-e-icon-list-numbered:before {  content: "\\e9b9";}.w-e-icon-list2:before {  content: "\\e9bb";}.w-e-icon-link:before {  content: "\\e9cb";}.w-e-icon-happy:before {  content: "\\e9df";}.w-e-icon-bold:before {  content: "\\ea62";}.w-e-icon-underline:before {  content: "\\ea63";}.w-e-icon-italic:before {  content: "\\ea64";}.w-e-icon-strikethrough:before {  content: "\\ea65";}.w-e-icon-table2:before {  content: "\\ea71";}.w-e-icon-paragraph-left:before {  content: "\\ea77";}.w-e-icon-paragraph-center:before {  content: "\\ea78";}.w-e-icon-paragraph-right:before {  content: "\\ea79";}.w-e-icon-terminal:before {  content: "\\f120";}.w-e-icon-page-break:before {  content: "\\ea68";}.w-e-icon-cancel-circle:before {  content: "\\ea0d";}.w-e-toolbar {  display: -webkit-box;  display: -ms-flexbox;  display: flex;  padding: 0 5px;  /* 单个菜单 */}.w-e-toolbar .w-e-menu {  position: relative;  text-align: center;  padding: 5px 10px;  cursor: pointer;}.w-e-toolbar .w-e-menu i {  color: #999;}.w-e-toolbar .w-e-menu:hover i {  color: #333;}.w-e-toolbar .w-e-active i {  color: #1e88e5;}.w-e-toolbar .w-e-active:hover i {  color: #1e88e5;}.w-e-text-container .w-e-panel-container {  position: absolute;  top: 0;  left: 50%;  border: 1px solid #ccc;  border-top: 0;  box-shadow: 1px 1px 2px #ccc;  color: #333;  background-color: #fff;  /* 为 emotion panel 定制的样式 */  /* 上传图片的 panel 定制样式 */}.w-e-text-container .w-e-panel-container .w-e-panel-close {  position: absolute;  right: 0;  top: 0;  padding: 5px;  margin: 2px 5px 0 0;  cursor: pointer;  color: #999;}.w-e-text-container .w-e-panel-container .w-e-panel-close:hover {  color: #333;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-title {  list-style: none;  display: -webkit-box;  display: -ms-flexbox;  display: flex;  font-size: 14px;  margin: 2px 10px 0 10px;  border-bottom: 1px solid #f1f1f1;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-title .w-e-item {  padding: 3px 5px;  color: #999;  cursor: pointer;  margin: 0 3px;  position: relative;  top: 1px;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-title .w-e-active {  color: #333;  border-bottom: 1px solid #333;  cursor: default;  font-weight: 700;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-content {  padding: 10px 15px 10px 15px;  font-size: 16px;  /* 输入框的样式 */  /* 按钮的样式 */}.w-e-text-container .w-e-panel-container .w-e-panel-tab-content input:focus,.w-e-text-container .w-e-panel-container .w-e-panel-tab-content textarea:focus,.w-e-text-container .w-e-panel-container .w-e-panel-tab-content button:focus {  outline: none;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-content textarea {  width: 100%;  border: 1px solid #ccc;  padding: 5px;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-content textarea:focus {  border-color: #1e88e5;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-content input[type=text] {  border: none;  border-bottom: 1px solid #ccc;  font-size: 14px;  height: 20px;  color: #333;  text-align: left;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-content input[type=text].small {  width: 30px;  text-align: center;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-content input[type=text].block {  display: block;  width: 100%;  margin: 10px 0;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-content input[type=text]:focus {  border-bottom: 2px solid #1e88e5;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-content .w-e-button-container button {  font-size: 14px;  color: #1e88e5;  border: none;  padding: 5px 10px;  background-color: #fff;  cursor: pointer;  border-radius: 3px;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-content .w-e-button-container button.left {  float: left;  margin-right: 10px;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-content .w-e-button-container button.right {  float: right;  margin-left: 10px;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-content .w-e-button-container button.gray {  color: #999;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-content .w-e-button-container button.red {  color: #c24f4a;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-content .w-e-button-container button:hover {  background-color: #f1f1f1;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-content .w-e-button-container:after {  content: "";  display: table;  clear: both;}.w-e-text-container .w-e-panel-container .w-e-emoticon-container .w-e-item {  cursor: pointer;  font-size: 18px;  padding: 0 3px;  display: inline-block;  *display: inline;  *zoom: 1;}.w-e-text-container .w-e-panel-container .w-e-up-img-container {  text-align: center;}.w-e-text-container .w-e-panel-container .w-e-up-img-container .w-e-up-btn {  display: inline-block;  *display: inline;  *zoom: 1;  color: #999;  cursor: pointer;  font-size: 60px;  line-height: 1;}.w-e-text-container .w-e-panel-container .w-e-up-img-container .w-e-up-btn:hover {  color: #333;}.w-e-text-container {  position: relative;}.w-e-text-container .w-e-progress {  position: absolute;  background-color: #1e88e5;  bottom: 0;  left: 0;  height: 1px;}.w-e-text {  padding: 0 10px;  overflow-y: scroll;}.w-e-text p,.w-e-text h1,.w-e-text h2,.w-e-text h3,.w-e-text h4,.w-e-text h5,.w-e-text table,.w-e-text pre {  margin: 10px 0;  line-height: 1.5;}.w-e-text ul,.w-e-text ol {  margin: 10px 0 10px 20px;}.w-e-text blockquote {  display: block;  border-left: 8px solid #d0e5f2;  padding: 5px 10px;  margin: 10px 0;  line-height: 1.4;  font-size: 100%;  background-color: #f1f1f1;}.w-e-text code {  display: inline-block;  *display: inline;  *zoom: 1;  background-color: #f1f1f1;  border-radius: 3px;  padding: 3px 5px;  margin: 0 3px;}.w-e-text pre code {  display: block;}.w-e-text table {  border-top: 1px solid #ccc;  border-left: 1px solid #ccc;}.w-e-text table td,.w-e-text table th {  border-bottom: 1px solid #ccc;  border-right: 1px solid #ccc;  padding: 3px 5px;}.w-e-text table th {  border-bottom: 2px solid #ccc;  text-align: center;}.w-e-text:focus {  outline: none;}.w-e-text img {  cursor: pointer;}.w-e-text img:hover {  box-shadow: 0 0 5px #333;}.w-e-text img.w-e-selected {  border: 2px solid #1e88e5;}.w-e-text img.w-e-selected:hover {  box-shadow: none;}',document.getElementsByTagName("HEAD").item(0).appendChild(style),window.wangEditor||Editor}()},1210:function(module,exports,__webpack_require__){},249:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__.a="# RichEditor 富文本编辑器\n\n## Example\n\n```tsx\n<RichEditor\n  defaultValue={value}\n  max={100}\n  onChange={(html: string, text: string) => saveValue(html)}\n/>\n```\n\n## RichEditor props\n\n<table class=\"readme-table\">\n  <thead>\n  <tr>\n    <th>属性</th>\n    <th width=\"200\">类型</th>\n    <th width=\"260\">默认值</th>\n    <th width=\"260\">描述</th>\n    <th>是否必填</th>\n  </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td>prefix</td>\n      <td>string</td>\n      <td>hife</td>\n      <td>类名前缀</td>\n      <td>否</td>\n    </tr>\n    <tr>\n      <td>width</td>\n      <td>string</td>\n      <td>100%</td>\n      <td>编辑器宽度</td>\n      <td>否</td>\n    </tr>\n    <tr>\n      <td>width</td>\n      <td>string</td>\n      <td>100%</td>\n      <td>编辑器宽度</td>\n      <td>否</td>\n    </tr>\n    <tr>\n      <td>height</td>\n      <td>string</td>\n      <td>200px</td>\n      <td>编辑器高度（不包含 menu 部分）</td>\n      <td>否</td>\n    </tr>\n    <tr>\n      <td>border</td>\n      <td>string</td>\n      <td>1px solid #e2e2e2</td>\n      <td>边框样式</td>\n      <td>否</td>\n    </tr>\n    <tr>\n      <td>wrapperStyle</td>\n      <td>React.CSSProperties</td>\n      <td>{}</td>\n      <td>编辑器最外层行内样式</td>\n      <td>否</td>\n    </tr>\n    <tr>\n      <td>menuStyle</td>\n      <td>React.CSSProperties</td>\n      <td>{}</td>\n      <td>menu 行内样式</td>\n      <td>否</td>\n    </tr>\n    <tr>\n      <td>boxStyle</td>\n      <td>React.CSSProperties</td>\n      <td>{}</td>\n      <td>编辑区域行内样式</td>\n      <td>否</td>\n    </tr>\n    <tr>\n      <td>defaultValue</td>\n      <td>string</td>\n      <td>''</td>\n      <td>编辑器默认内容</td>\n      <td>否</td>\n    </tr>\n    <tr>\n      <td>max</td>\n      <td>number</td>\n      <td></td>\n      <td>能输入字符的最大值</td>\n      <td>否</td>\n    </tr>\n    <tr>\n      <td>zIndex</td>\n      <td>number</td>\n      <td>10</td>\n      <td>编辑区域 z-index 值</td>\n      <td>否</td>\n    </tr>\n    <tr>\n      <td>uploadImgMaxLength</td>\n      <td>number</td>\n      <td>1</td>\n      <td>上传图片最大的数量</td>\n      <td>否</td>\n    </tr>\n    <tr>\n      <td>texts</td>\n      <td>Texts（类型定义如下）</td>\n      <td>\n        {\n          deleteLink: '删除链接',\n          title: '设置标题',\n          font: '文字颜色',\n          online: '网络图片',\n          upload: '上传图片',\n          linkPic: '图片链接',\n          linkWord: '链接文字',\n          insert: '插入',\n          link: '链接'\n        }\n      </td>\n      <td>文案（国际化时传入不同的文案值）</td>\n      <td>否</td>\n    </tr>\n    <tr>\n      <td>customUploadImg</td>\n      <td>(files: FileList, insert: (insertContent: string) => void) => void</td>\n      <td>-</td>\n      <td>自定义上传图片函数。上传完图片后需要调用 insert() 函数，并且将后端返回的图片地址作为 insert() 的第一个参数传入</td>\n      <td>否</td>\n    </tr>\n    <tr>\n      <td>onChange</td>\n      <td>(html: string, text: string) => void</td>\n      <td>-</td>\n      <td>内容改变时的回调（可以使用此回调保存用户输入的数据）</td>\n      <td>否</td>\n    </tr>\n    <tr>\n      <td>onBlur</td>\n      <td>(html: string) => void</td>\n      <td>-</td>\n      <td>失焦的回调</td>\n      <td>否</td>\n    </tr>\n    <tr>\n      <td>onImageTypeError</td>\n      <td>() => void</td>\n      <td>-</td>\n      <td>选择图片类型错误时的回调（可使用此回调来弹窗，提示用户错误信息）</td>\n      <td>否</td>\n    </tr>\n    <tr>\n      <td>onUploadImageError</td>\n      <td>() => void</td>\n      <td>-</td>\n      <td>上传图片错误时的回调（对图片数量和大小校验时出错）</td>\n      <td>否</td>\n    </tr>\n  </tbody>\n</table>\n\n## Texts inteface\n<table class=\"readme-table\">\n  <thead>\n  <tr>\n    <th>属性</th>\n    <th>描述</th>\n  </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td>deleteLink</td>\n      <td>删除链接</td>\n    </tr>\n    <tr>\n      <td>font</td>\n      <td>文字颜色</td>\n    </tr>\n    <tr>\n      <td>online</td>\n      <td>网络图片</td>\n    </tr>\n    <tr>\n      <td>upload</td>\n      <td>上传图片</td>\n    </tr>\n    <tr>\n      <td>linkPic</td>\n      <td>图片链接</td>\n    </tr>\n    <tr>\n      <td>linkWord</td>\n      <td>链接文字</td>\n    </tr>\n    <tr>\n      <td>insert</td>\n      <td>插入</td>\n    </tr>\n    <tr>\n      <td>link</td>\n      <td>链接</td>\n    </tr>\n  </tbody>\n</table>\n"},250:function(module,__webpack_exports__,__webpack_require__){"use strict";var defineProperty=__webpack_require__(248),classCallCheck=__webpack_require__(395),createClass=__webpack_require__(396),possibleConstructorReturn=__webpack_require__(399),getPrototypeOf=__webpack_require__(167),inherits=__webpack_require__(397),react=__webpack_require__(0),react_default=__webpack_require__.n(react),classnames=__webpack_require__(398),classnames_default=__webpack_require__.n(classnames),RichEditor_RichEditor=function(_React$Component){function RichEditor(props){var _this;return Object(classCallCheck.a)(this,RichEditor),(_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(RichEditor).call(this,props))).richEditorMenu=void 0,_this.richEditorBox=void 0,_this.editor=void 0,_this._richEditorCreater=function(RichEditor,menuDOM,boxDom){var _this$props=_this.props,onChange=_this$props.onChange,onBlur=_this$props.onBlur,uploadImgMaxLength=_this$props.uploadImgMaxLength,zIndex=_this$props.zIndex,texts=_this$props.texts,customUploadImg=_this$props.customUploadImg,onImageTypeError=_this$props.onImageTypeError,onUploadImageError=_this$props.onUploadImageError,defaultValue=_this.state.defaultValue;_this.editor=new RichEditor(_this.richEditorMenu||menuDOM,_this.richEditorBox||boxDom),_this.editor.customConfig.customAlert=onUploadImageError,_this.editor.customConfig.menus=["bold","foreColor","quote","link","image","hr"],_this.editor.customConfig.lang={"删除链接":texts.deleteLink,"设置标题":texts.title,"文字颜色":texts.font,"网络图片":texts.online,"上传图片":texts.upload,"图片链接":texts.linkPic,"链接文字":texts.linkWord,"插入":texts.insert,"链接":texts.link},_this.editor.customConfig.debug=!1,_this.editor.customConfig.onchange=function(html,text){onChange&&onChange(html,text)},_this.editor.customConfig.onblur=function(html){onBlur&&onBlur(html)},_this.editor.customConfig.uploadImgMaxLength=uploadImgMaxLength,customUploadImg&&(_this.editor.customConfig.customUploadImg=customUploadImg),onImageTypeError&&(_this.editor.customConfig.customUploadImg.accept=onImageTypeError),_this.editor.customConfig.zIndex=zIndex,_this.editor.create(),defaultValue&&_this.editor.txt.html(defaultValue)},_this.state={defaultValue:props.defaultValue},_this}return Object(inherits.a)(RichEditor,_React$Component),Object(createClass.a)(RichEditor,[{key:"componentDidMount",value:function componentDidMount(){if(!function isMobile(){var u=navigator.userAgent;return!!u.match(/AppleWebKit.*Mobile.*/)||!!u.match(/Mobile/g)}()){var wangEditor=__webpack_require__(1209);this._richEditorCreater(wangEditor,this.richEditorMenu,this.richEditorBox)}}},{key:"render",value:function render(){var _classNames,_this2=this,_this$props2=this.props,prefix=_this$props2.prefix,height=_this$props2.height,width=_this$props2.width,border=_this$props2.border,wrapperStyle=_this$props2.wrapperStyle,menuStyle=_this$props2.menuStyle,boxStyle=_this$props2.boxStyle,max=_this$props2.max,content=this.editor&&this.editor.txt.text()||"",maxClass=classnames_default()((_classNames={},Object(defineProperty.a)(_classNames,"".concat(prefix,"-rich-editor__max"),!0),Object(defineProperty.a)(_classNames,"".concat(prefix,"-rich-editor__max--disabled"),max&&content.length>=max),_classNames));return react_default.a.createElement("section",{className:"".concat(prefix,"-rich-editor"),style:wrapperStyle},react_default.a.createElement("div",{className:"".concat(prefix,"-rich-editor__menu"),style:menuStyle,ref:function ref(richEditorMenu){_this2.richEditorMenu=richEditorMenu}}),react_default.a.createElement("div",{className:"".concat(prefix,"-rich-editor__box"),style:boxStyle,ref:function ref(richEditorBox){_this2.richEditorBox=richEditorBox}}),max&&react_default.a.createElement("div",{className:maxClass},content.length,"/",max),react_default.a.createElement("style",null,"\n          .".concat(prefix,"-rich-editor {\n            position: relative;\n          }\n          .").concat(prefix,"-rich-editor__menu {\n            border: ").concat(border,";\n            width: ").concat(width,";\n            height: 27px;\n            box-sizing: border-box;\n            margin-top: 16px;\n            user-select: none;\n            border-top-left-radius: 4px;\n            border-top-right-radius: 4px;\n          }\n          .").concat(prefix,"-rich-editor__box {\n            border-left: ").concat(border,";\n            border-right: ").concat(border,";\n            border-bottom: ").concat(border,";\n            width: ").concat(width,";\n            height: ").concat(height,";\n            box-sizing: border-box;\n            border-bottom-left-radius: 4px;\n            border-bottom-right-radius: 4px;\n          }\n          .").concat(prefix,"-rich-editor__subscript {\n            font-size: 12px;\n            color: #9b9b9b;\n            position: absolute;\n            right: 49px;\n            bottom: 9px;\n          }\n        ")))}}]),RichEditor}(react_default.a.Component);RichEditor_RichEditor.defaultProps={prefix:"hife",defaultValue:"",uploadImgMaxLength:1,zIndex:10,width:"100%",height:"200px",border:"1px solid #e2e2e2",wrapperStyle:{},menuStyle:{},boxStyle:{},texts:{deleteLink:"删除链接",title:"设置标题",font:"文字颜色",online:"网络图片",upload:"上传图片",linkPic:"图片链接",linkWord:"链接文字",insert:"插入",link:"链接"}};var src_RichEditor=RichEditor_RichEditor;__webpack_exports__.a=src_RichEditor},400:function(module,exports,__webpack_require__){__webpack_require__(401),__webpack_require__(544),module.exports=__webpack_require__(545)},463:function(module,exports){},545:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var _storybook_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(99),_storybook_addon_info__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(381),req=(__webpack_require__(1204),__webpack_require__(1205));Object(_storybook_react__WEBPACK_IMPORTED_MODULE_0__.addParameters)({options:{isFullscreen:!1,showNav:!0,showPanel:!0,panelPosition:"bottom",sortStoriesByKind:!1,hierarchySeparator:/\/|\./,hierarchyRootSeparator:/\|/,sidebarAnimations:!0,enableShortcuts:!0,isToolshown:!0,theme:void 0}}),Object(_storybook_react__WEBPACK_IMPORTED_MODULE_0__.addDecorator)(Object(_storybook_addon_info__WEBPACK_IMPORTED_MODULE_1__.withInfo)({header:!1,source:!1})),Object(_storybook_react__WEBPACK_IMPORTED_MODULE_0__.configure)((function loadStories(){req.keys().forEach((function(filename){return req(filename)}))}),module)}.call(this,__webpack_require__(296)(module))},723:function(module,exports,__webpack_require__){var map={"./nestedObjectAssign":350,"./nestedObjectAssign.js":350};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=723}},[[400,1,2]]]);
//# sourceMappingURL=main.f0ace70b9db0cd3ba85b.bundle.js.map